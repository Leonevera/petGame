{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\main\\js/assets\\main\\js\\main.js"],"names":["globalData","require","cc","Class","extends","Component","properties","profile","Sprite","pet","shop","travel","work","home","_isFunctionShow","init","sprite","species","loader","loadRes","SpriteFrame","err","sp","console","log","node","spriteFrame","onPlusBtnClicked","showFunction","actionShop","actionWork","actionTravel","spawn","moveBy","v2","fadeOut","fadeIn","runAction","onLoad","start","login","wx","success","js_code","res","code","date","Date","year","getFullYear","month","getMonth","dat","getDate","hour","getHours","minute","getMinutes","second","getSeconds","timeStr","flagCamera","get","serverAddr","request","url","serveAddr","method","header","data","loginTime","app","userID","flag_userID","Number","flag_prompt"],"mappings":"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","file":"main.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\main\\js","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nvar globalData = require('globalData');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        profile: cc.Sprite,\n        pet: cc.Sprite,\n        shop: cc.Sprite,\n        travel: cc.Sprite,\n        work: cc.Sprite,\n        home: cc.Sprite,\n\n        _isFunctionShow: true,\n        \n    },\n\n    init: function() {\n        // 初始化宠物形象\n        let sprite = this.pet;\n        if (globalData.species == 0) {\n            cc.loader.loadRes(\"owl-simple\", cc.SpriteFrame, (err, sp) => {\n                console.log(err);\n                if (err) return;\n                if (this.node) {\n                    console.log(\"success\");\n                    if(sprite){\n                        sprite.spriteFrame = sp;\n                    }\n                }\n            })\n        } else if (globalData.species == 1) {\n            cc.loader.loadRes(\"penguin-simple\", cc.SpriteFrame, (err, sp) => {\n                console.log(err);\n                if (err) return;\n                if (this.node) {\n                    console.log(\"success\");\n                    if(sprite){\n                        sprite.spriteFrame = sp;\n                    }\n                }\n            })\n        } else if (globalData.species == 2) {\n            cc.loader.loadRes(\"cat-simple\", cc.SpriteFrame, (err, sp) => {\n                console.log(err);\n                if (err) return;\n                if (this.node) {\n                    console.log(\"success\");\n                    if(sprite){\n                        sprite.spriteFrame = sp;\n                    }\n                }\n            })\n        } else if (globalData.species == 3) {\n            cc.loader.loadRes(\"dog-simple\", cc.SpriteFrame, (err, sp) => {\n                console.log(err);\n                if (err) return;\n                if (this.node) {\n                    console.log(\"success\");\n                    if(sprite){\n                        sprite.spriteFrame = sp;\n                    }\n                }\n            })\n        }    \n    },\n\n    onPlusBtnClicked: function() {\n        this.showFunction();\n    },\n\n    showFunction: function() {\n        this._isFunctionShow = !this._isFunctionShow;\n        let actionShop = null;\n        let actionWork = null;\n        let actionTravel = null;\n        if (this._isFunctionShow) {\n            actionTravel = cc.spawn(cc.moveBy(0.5, cc.v2(0, -94)), cc.fadeOut(0.5));\n            actionWork =  cc.spawn(cc.moveBy(0.6, cc.v2(0, -188)), cc.fadeOut(0.6));\n            actionShop = cc.spawn(cc.moveBy(0.7, cc.v2(0, -282)), cc.fadeOut(0.7));\n        } else {\n            actionTravel = cc.spawn(cc.moveBy(0.5, cc.v2(0, 94)), cc.fadeIn(0.5));\n            actionWork =  cc.spawn(cc.moveBy(0.6, cc.v2(0, 188)), cc.fadeIn(0.6));\n            actionShop = cc.spawn(cc.moveBy(0.7, cc.v2(0, 282)), cc.fadeIn(0.7));\n        }\n        this.travel.node.runAction(actionTravel);\n        this.work.node.runAction(actionWork);\n        this.shop.node.runAction(actionShop);\n    },\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        console.log(globalData);\n        this.init();\n    },\n\n    start () {\n\n    },\n\n    /* 登录函数\n  author: qll\n  time: 2019/12/2\n    */\n    login() {\n        \n        wx.login({\n            success: res => {\n                // 发送 res.code 到后台并收取生成的userID，\n                let js_code = res.code;\n                console.log(js_code);\n                let date = new Date();   \n\t\t        let year = date.getFullYear(); //获取当前年份   \n\t\t        let month = date.getMonth()+1; //获取当前月份   \n\t\t        let dat = date.getDate(); //获取当前日    \n\t\t        let hour = date.getHours(); //获取小时   \n\t\t        let minute = date.getMinutes(); //获取分钟   \n\t\t        let second = date.getSeconds(); //获取秒   \n                let timeStr = year + '-' + month + '-' + dat + ' ' + hour + ':' + minute + ':' + second;\n                let flagCamera = globalData.flagCamera.get(); \n                let serverAddr = globalData.serverAddr.get() + \"login.php\";\n                wx.request({\n                    url: serveAddr,\n                    method: \"POST\",\n                    header: {\n                        \"content-type\": \"application/x-www-form-urlencoded\"\n                    },\n                    data: { \n                        js_code : js_code,\n                        loginTime: timeStr,\n                        flagCamera: flagCamera, \n                    },\n                    success(res) {\n                        console.log(res.data)\n                        app.globalData.userID = res.data.userID;\n                        app.globalData.flag_userID = true;\n                        if (Number(res.data.flag_prompt) == 1) {\n                        app.globalData.flag_prompt = true;\n                        }\n                    }\n                });\n            }\n        })\n        console.log('登录完成');\n    },\n\n    // update (dt) {},\n});\n"]}